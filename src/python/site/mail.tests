The mail module
===============

    >>> import mail

Other imports needed for testing
--------------------------------

    >>> import email
    >>> import re

Edge cases
----------

    >>> mail.testing = lambda: True
    >>> header = {
    ...     'subject':'Warning: could not send message for past 5 years',
    ...     'from':'Mail Delivery System <Mailer-Daemon@saturn.k5online.com>',
    ... }
    >>> check, handler = mail.about_mail_delivery()
    >>> check(header)
    True

    >>> text = 'some text'
    >>> assert 'boring mail delivery' in handler(header, text)
    >>> header = {'From': 'MAILER-DAEMON@ie-mail-1.altobridge.com (Mail Delivery System)'}
    >>> check(header)
    True

    >>> mail.assigned_to_someone_else('Assigned to Alan')
    False
    >>> mail.assigned_to_someone_else('Assigned to Alan now')
    False
    >>> mail.assigned_to_someone_else('Assigned to Sean now')
    True
    >>> mail.assigned_to_someone_else('Assigning to Sean now')
    True
    >>> mail.assigned_to_someone_else('I assigned to Sean now')
    True
    >>> mail.assigned_to_someone_else('Assigned to Sean')
    True
    >>> mail.assigned_to_someone_else('Committed to Sean now')
    False


    >>> addresses = [('Fred', 'fred.fred.co.uk'), ('Spam', 'spammer@spam.com')]
    >>> mail.has_email_address(addresses, 'spammer@spam.com')
    True
    >>> mail.has_email_address(addresses, re.compile('.*@spam.com'))
    True
    >>> mail.has_email_name(addresses, 'Fred')
    True
    >>> mail.has_email_name(addresses, re.compile('Fre[ed]'))
    True


