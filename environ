#! /bin/sh

JAB=$HOME/.jab
BIN=$JAB/bin

export pinky_ip=192.168.0.103
export COLUMNS

export EXITSTATUS="$?"

#export DISPLAY=:0

export HISTSIZ=100000

export XAUTHORITY=$HOME/.Xauthority

if ls -@ >/dev/null 2>&1 
then
	# the ls option for colour is "-@" on my macbook
	export LS_COLOUR_OPTION='-@'
else
	export LS_COLOUR_OPTION='--color=auto'
fi
export MONTYLINGUA="$PYTHONPATH/monty/data"

add_to_path ()
{
	if [ -d $1 ]
	then
		export PATH=${PATH}:$1
	fi
}
export PATH=BIN
add_to_path ~/bin
add_to_path ~/git/bin
add_to_path ~/python25/bin
add_to_path /usr/bin
add_to_path /usr/local/bin
add_to_path /opt/local/bin
add_to_path $TRACKERS/repository/bin/
add_to_path $TRACKERS/issues/bin/
add_to_path /bin
add_to_path /sbin

export PS1
export PYTHONDOCS=/home/builder/python25/share/doc/html
export SITE=`python -c "import sys; print [ s for s in sys.path if s.endswith('site-packages')][0]"`

#
# Path dependencies
#

# Altobridge repositories
if [ -d /amg ]
then
	export AMG=file:///amg
	export LCP=file:///usr/local/svn/lcp
	export JABS=file:///usr/local/abrogan/jabs
else
	export AMG=svn+ssh://ie-track-1/amg
	export LCP=http://intranet.altobridge.com/svn/lcp
	export JABS=http://intranet.altobridge.com/jab
fi
#
# Working directories
#
if [ -d /mnt/source ]
then
	export SOURCE=/mnt/source
elif [ -d $SITE/altobridge ]
then
	export SOURCE=$SITE/altobridge
else
	export SOURCE=~/.jab
fi
export AMG_SOURCE=$SOURCE/amg
if [ -d $AMG_SOURCE ]
then
	export AMG_TRUNK=$AMG_SOURCE/trunk
else
	export AMG_TRUNK=/usr/local/trunk
fi
if [ -d $AMG_TRUNK ]
then
	export AMG_BUILDS=${AMG_SOURCE}/builds
	export AMG_RELEASES=${AMG_SOURCE}/releases
	export AMG_DISTRIBUTION=${AMG_SOURCE}/distribution
	export AMG_IT=${AMG_SOURCE}/IT

	export TRACKER_WORKING=$AMG_TRUNK/trackers
	export TRACKERS=$AMG_TRUNK/trackers
	export TRACKER_TESTING=$TRACKER_WORKING/testing
	export BUILDER_WORKING=$TRACKER_WORKING/builder
	export VERSION=`grep version $BUILDER_WORKING/configBuild.py | head -n 1 | cut -f2 -d\' `	
fi

if [ -d /mnt/source ]
then
	export MAIN_PYTHON=$BUILDER_WORKING
	export SCRIPTS=$BUILDER_WORKING
else
	export MAIN_PYTHON=~/.jab/python
fi

export LCP_SOURCE=$SOURCE/lcp
export NSN_SOURCE=$LCP_SOURCE/nsn
export NSN_BUILDS=${NSN_SOURCE}/builds
export NSN_RELEASES=${NSN_SOURCE}/releases

export RELEASES=/mnt/releases
export BUILDING=${RELEASES}/building
export BUILD_DEBUG=${RELEASES}/building/debug
export NOTES=${RELEASES}/building/notes

export PYTHONPATH=$HOME/python/site
add_to_pythonpath ()
{
	if [ -d $1 ]
	then
		export PYTHONPATH=$PYTHONPATH:$1
	fi
}
add_to_pythonpath $JAB/python/site
add_to_pythonpath $BUILDER_WORKING
add_to_pythonpath $SITE/altobridge
if [ -f ~/.pythonrc.py ]
then
	export PYTHONSTARTUP=~/.pythonrc.py
else
	export PYTHONSTARTUP=~/.jab/python/pythonrc.py
fi

if [ -x /opt/local/bin/gwhich ]
then
	export WHICH=/opt/local/bin/gwhich
else
	export WHICH=/usr/bin/which
fi
export EDITOR=`$WHICH vim`

#
# colours
#
export   NO_COLOUR="\[\033[0m\]"
export         FOO="\[\033[0;31m\]"
export   LIGHT_RED="\[\033[1;31m\]"
export       GREEN="\[\033[0;32m\]"
export LIGHT_GREEN="\[\033[1;32m\]"
export       BROWN="\[\033[0;33m\]"
export      YELLOW="\[\033[1;33m\]"
export        BLUE="\[\033[0;34m\]"
export  LIGHT_BLUE="\[\033[1;34m\]"
export        CYAN="\[\033[0;36m\]"
export  LIGHT_CYAN="\[\033[1;36m\]"
export       WHITE="\[\033[1;37m\]"
export  LIGHT_GRAY="\[\033[0;37m\]"
export         RED="\[\033[1;38m\]"
export     RED_TOO="\[\033[0;38m\]"
export   PROMPT_NO_COLOUR="\033[0m"
export         PROMPT_FOO="\033[0;31m"
export   PROMPT_LIGHT_RED="\033[1;31m"
export       PROMPT_GREEN="\033[0;32m"
export PROMPT_LIGHT_GREEN="\033[1;32m"
export       PROMPT_BROWN="\033[0;33m"
export      PROMPT_YELLOW="\033[1;33m"
export        PROMPT_BLUE="\033[0;34m"
export  PROMPT_LIGHT_BLUE="\033[1;34m"
export        PROMPT_CYAN="\033[0;36m"
export  PROMPT_LIGHT_CYAN="\033[1;36m"
export       PROMPT_WHITE="\033[1;37m"
export  PROMPT_LIGHT_GRAY="\033[0;37m"
export         PROMPT_RED="\033[1;38m"
export     PROMPT_RED_TOO="\033[0;38m"
