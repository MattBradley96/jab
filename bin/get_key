#! /usr/bin/env python2.7
"""Script to get a key from the keyboard"""

from __future__ import print_function
import sys


import dotsite as site


__version__ = '0.1.1'


class ScriptError(NotImplementedError):
    pass


def Use_debugger(_args):
    try:
        import pudb as pdb
    except ImportError:
        import pdb
    pdb.set_trace()


def add_args(parser):
    parser.add_argument('-p', '--prompt', action='store_true', default='',
                        help='Prompt to show before getting keys '
                        '(default: none)')
    parser.add_argument('-c', '--codes', action='store_true',
                        help='Show raw codes')
    return parser


def script(args):
    if args.default:
        print(args.default, end=' ')
    if args.codes:
        print(', '.join(site.getch.get_codes()))
    else:
        try:
            print(site.getch.get_key())
        except KeyError as e:
            print(e.message)
    return True


if __name__ == '__main__':
    sys.exit(site.scripts.main(script, add_args, __version__))
