#! /bin/bash

. ~/hub/what/what.sh
. ~/jab/local/functons.sh optional

_find_copier () {
    CLI_COPIER=
    for possible in xsel pbcopy; do
        CLI_COPIER=$(which $possible 2>/dev/null)
        if [[ -n $CLI_COPIER ]]; then
            return 0
        fi
    done
    return 1
}

show_word () {
    if [[ -z $1 ]]; then
        _dttc
    else
        case "$1" in 
            "1") _mlaw;;
            "2") _lism;;
            "g") _gttc;;
        esac
    fi
}

main () {
    _find_copier
    if [[ ! -x $CLI_COPIER ]]; then
        echo "No clipboard program available" >&2
        show_word $1
        return 1
    fi
    show_word $1 | $CLI_COPIER
    return 0
}

set -x
main "$@"
set +x
